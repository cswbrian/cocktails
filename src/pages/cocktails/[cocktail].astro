---
import { tasteColorMapping } from "src/const";
import { cocktails } from "../../const/cocktails";
import Layout from "../../layouts/Layout.astro";
import Ingredients from "@components/Ingredients";

export function getStaticPaths() {
  return cocktails.map((cocktail) => {
    return {
      params: {
        cocktail: cocktail.name.toLocaleLowerCase().replace(/[\s#\/]/g, "-"),
      },
      props: { cocktail },
    };
  });
}

const {
  cocktail: { name, timing, tastes, ingredients, preparation },
} = Astro.props;
---

<Layout title={`${name} - Cocktail`}>
  <section class={`-mt-16 pt-24 px-4 pb-2 ${tasteColorMapping[tastes[0]]}`}>
    <h1 class="text-3xl font-bold">{name}</h1>
    <span>{tastes.map((taste) => taste).join(", ")}</span>
  </section>
  {
   tastes.slice(1).map((taste) => {
    return <div class={`p-1 ${tasteColorMapping[taste]}`}></div>
   })
  }
  <section class="p-4">
    <h2 class="text-sm">Ingredients</h2>
    <Ingredients client:load ingredients={ingredients} />
  </section>
</Layout>
